define("app.application",["angular","jquery","bootstrap","ui-bootstrap-tpls","angular-css","app.configs.appConfig","app.configs.dependencyLoader","app.configs.appEnvironment","app.configs.rootScope","app.configs.modal","app.configs.http","app.factories.httpState","app.factories.httpDataHandler","app.services.ajaxService","app.services.httpService","app.services.popupService","app.routes.run","app.directives.title"],function(){"use strict";var e=angular.module;return angular.module=function(t,r,n){var a=e(t,r,n);return a.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,r,n){a.controller=e.register,a.directive=t.directive,a.filter=r.register,a.factory=n.factory,a.service=n.service}]),a},angular.module("app.application",["ui.bootstrap","angularCSS","app.configs","app.factories","app.services","app.routes","app.directives"])}),define("app.configs",["require"],function(e){"use strict";return angular.module("app.configs",["ui.router"])}),define("app.directives",["module"],function(e){"use strict";return angular.module("app.directives",[])}),define("app.factories",["require"],function(e){"use strict";return angular.module("app.factories",[])}),define("app.routes",["angular-ui-router"],function(){"use strict";return angular.module("app.routes",["ui.router"]).config(["$urlRouterProvider","$stateProvider",function(e,t){}])}),define("app.services",["require"],function(e){"use strict";return angular.module("app.services",[])}),define("app.configs.appConfig",["app.configs"],function(configs){"use strict";configs.config(["$provide",function($provide){var app=$("#app").length>0?$("#app"):null;$provide.constant("$appConfig",{serverUrl:app?app.attr("data-server"):"",debug:app?!!eval(app.attr("data-debug")):!1})}])}),define("app.configs.appEnvironment",["app.configs"],function(e){"use strict";e.config(["$provide",function(e){e.constant("$appEnvironment",{ajaxState:{loading:!1,url:null,method:null,data:null}})}])}),define("app.configs.dependencyLoader",["app.configs"],function(e){"use strict";e.config(["$stateProvider",function(e){function t(e){return"string"==typeof e&&(e=[e]),["$q",function(t){var r=t.defer();return require(e,function(){r.resolve(arguments)}),r.promise}]}var r=e.state;e.state=function(e,n){if(n.dependencies){var a=n.resolve||{};a.$deps=t(n.dependencies),n.resolve=a}return r(e,n)}}])}),define("app.configs.http",["app.configs"],function(e){"use strict";e.config(["$httpProvider",function(e){e.defaults.headers.get=e.defaults.headers.get?e.defaults.headers.get:{},e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",e.interceptors.push("app.factories.httpState"),jQuery.support.cors=!0}])}),define("app.configs.modal",["app.configs"],function(e){"use strict";e.constant("app.configs.modal",{modals:{},_counter:0}).config(["$provide","app.configs.modal",function(e,t){e.decorator("$modal",["$delegate","$rootScope",function(e,r){var n=e.open;return e.closeAll=function(){for(var e in t.modals)t.modals[e].dismiss()},e.open=function(a){a.isolate=void 0===a.isolate?!0:a.isolate,a.scope=a.scope?a.scope:r.$new(a.isolate),a.scope.$data=a.data?a.data:a.scope.$data?a.scope.$data:{},a.scope.$handlers=a.handlers?a.handlers:a.scope.$handlers?a.scope.$handlers:{},a.scope.$stores=a.stores?a.stores:a.scope.$stores?a.scope.$stores:{},a.backdrop=a.backdrop?a.backdrop:"static",a.single===!0&&e.closeAll();var o=n(a);return o.index=++t._counter,o.result.then(function(){delete t.modals[o.index]},function(){delete t.modals[o.index]}),t.modals[t._counter]=o,o},e}])}])}),define("app.configs.rootScope",["app.configs"],function(e){"use strict";e.config(["$provide",function(e){e.decorator("$rootScope",["$delegate","$appEnvironment",function(e,t){return e.$data={},e.$handlers={},e.$stores={},e.$appEnvironment=t,e.addHandler=function(t,r){e.$handlers[t]=r},e.getHandler=function(t){return e.$handlers[t]},e.setData=function(t){e.$data=t},e.getValue=function(t){return e.$data[t]},e.setValue=function(t,r){e.$data[t]=r},e.addStore=function(t,r){e.$stores[t]=r},e}])}])}),define("app.directives.title",["app.directives"],function(e){"use strict";e.directive("title",["$rootScope","$timeout",function(e,t){var r=function(r,n,a){e.$on("$stateChangeSuccess",function(e,r){t(function(){document.title=r.data&&r.data.title?r.data.title:""})})};return{restrict:"E",link:r}}])}),define("app.factories.httpDataHandler",["app.factories"],function(e){"use strict";e.factory("app.factories.httpDataHandler",["$modal",function(e){var t={doResponse:function(e,r){e.data=e.data?e.data:{},e.data&&e.data.success===!1?t.doError(e,r):r.resolve(e.data)},doError:function(t,r){t.data=t.data?t.data:{},e.open({templateUrl:"templates/modal/Error.html",data:{text:t.data.message}}),r.reject(t.data)}};return t}])}),define("app.factories.httpState",["app.factories"],function(e){"use strict";e.factory("app.factories.httpState",["$q","$appEnvironment",function(e,t){return{request:function(e){return t.ajaxState={loading:!0,url:e.url,method:e.method,data:e.data},e},requestError:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e},response:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e},responseError:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e}}}])}),define("app.routes.run",["app.routes"],function(e){"use strict";e.run(["$rootScope","$state","$stateParams",function(e,t,r){e.$state=t,e.$stateParams=r,e.$on("$stateChangeStart",function(e,t,r,n,a){}),e.$on("$stateChangeSuccess",function(t,r,n,a,o){e.$previous=a,e.$previousParams=o}),t.back=function(){e.$previous&&t.go(e.$previous.name,e.$previousParams)}}])}),define("app.services.ajaxService",["app.services"],function(e){"use strict";e.service("app.services.ajaxService",["$q","$modal","$appConfig","app.factories.httpDataHandler",function(e,t,r,n){}])}),define("app.services.httpService",["app.services"],function(e){"use strict";e.service("app.services.httpService",["$http","$q","$modal","$appConfig","app.factories.httpDataHandler",function(e,t,r,n,a){var o=this;o.resolveUrl=function(e){return 0===e.indexOf("http://")?e:n.serverUrl+e},o.get=function(r){var n=t.defer();return e({method:"get",url:o.resolveUrl(r),withCredentials:!0}).then(function(e){a.doResponse(e,n)},function(e){a.doError(e,n)}),n.promise},o.post=function(r,n){var i=t.defer();return e({method:"post",data:n,url:o.resolveUrl(r),withCredentials:!0}).then(function(e){a.doResponse(e,i)},function(e){a.doError(e,i)}),i.promise}}])}),define("app.services.popupService",["app.services"],function(e){"use strict";e.service("app.services.popupService",["$rootScope","$modal","$q",function(e,t,r){this.information=function(e,n){var a=r.defer();return t.open({templateUrl:"templates/modal/Information.html",size:n?n:"sm",data:{text:e?e:"操作成功"}}).result.then(function(e){a.resolve()}),a.promise},this.confirm=function(e,n){var a=r.defer();return a.promise.ok=function(e){return a.promise.then(e),a.promise},a.promise.cancel=function(e){return a.promise["catch"](e),a.promise},t.open({templateUrl:"templates/modal/Confirm.html",size:n?n:"sm",data:{text:e?e:"是否确认操作？"}}).result.then(function(e){"ok"===e?a.resolve(e):a.reject(e)}),a.promise},this.error=function(e,n){var a=r.defer(),o={};return null===e||void 0===e?o.text="发生错误":"[object Array]"==Object.prototype.toString.call(e)?o.contents=e:o.text=e,t.open({templateUrl:"templates/modal/Error.html",size:n?n:"sm",data:o}).result.then(function(e){a.resolve(e)}),a.promise}}])});